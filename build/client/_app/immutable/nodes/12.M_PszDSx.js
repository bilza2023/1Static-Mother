import{s as U,d as Y,n as j,k as fe,o as ce}from"../chunks/scheduler.RwmvnsSZ.js";import{S as O,i as Q,e as b,s as I,a as v,b as C,g as y,f as m,h as k,j as d,k as E,q as J,r as N,u as B,v as P,y as G,w as z,l as D,x as F,t as w,B as K,o as oe,c as S,d as T,m as R,n as A,C as ue,D as he}from"../chunks/index.AhbQXMAj.js";/* empty css                                                    */import{t as Z}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.zqLE1zfZ.js";import"../chunks/entry.MzKmVToJ.js";import{a as me,A as _e}from"../chunks/ajaxPost.EZt-lWUI.js";import{I as de}from"../chunks/Logo.gaRDBBR4.js";import{H as pe}from"../chunks/HdgWithIcon.4zdY00M0.js";import{P as ge}from"../chunks/PageWrapper.K5cVhcfe.js";import{N as be}from"../chunks/Nav.L7OpJCb9.js";import{e as L}from"../chunks/each.mgyoW8tx.js";import{f as $}from"../chunks/index.09lYjaZV.js";function ve(){const a=localStorage.getItem("token");return!(!a||a==""||a==null)}function ke(){const a=localStorage.getItem("teacher_status");return!a||a==""||a==null?!1:a=="admin"}function Ee(a){let e,l,t,s,c,n,i,r,o;return{c(){e=b("p"),l=N(" Ch:"),t=N(a[3]),s=N(" Ex:"),c=N(a[4]),n=N(" Q: "),i=N(a[5]),r=N(" Pt: "),o=N(a[6]),this.h()},l(f){e=v(f,"P",{class:!0});var u=C(e);l=B(u," Ch:"),t=B(u,a[3]),s=B(u," Ex:"),c=B(u,a[4]),n=B(u," Q: "),i=B(u,a[5]),r=B(u," Pt: "),o=B(u,a[6]),u.forEach(m),this.h()},h(){k(e,"class","text-xs")},m(f,u){d(f,e,u),E(e,l),E(e,t),E(e,s),E(e,c),E(e,n),E(e,i),E(e,r),E(e,o)},p(f,u){u&8&&P(t,f[3]),u&16&&P(c,f[4]),u&32&&P(i,f[5]),u&64&&P(o,f[6])},d(f){f&&m(e)}}}function qe(a){let e,l=a[8]()+"",t;return{c(){e=b("p"),t=N(l),this.h()},l(s){e=v(s,"P",{class:!0});var c=C(e);t=B(c,l),c.forEach(m),this.h()},h(){k(e,"class","text-xs")},m(s,c){d(s,e,c),E(e,t)},p:j,d(s){s&&m(e)}}}function we(a){let e,l,t,s,c,n,i,r;function o(h,p){return h[1]!==""?qe:Ee}let f=o(a),u=f(a);return{c(){e=b("a"),l=b("div"),t=b("img"),c=I(),u.c(),this.h()},l(h){e=v(h,"A",{href:!0});var p=C(e);l=v(p,"DIV",{class:!0});var V=C(l);t=v(V,"IMG",{width:!0,height:!0,src:!0,alt:!0}),c=y(V),u.l(V),V.forEach(m),p.forEach(m),this.h()},h(){k(t,"width","200px"),k(t,"height","150px"),Y(t.src,s=a[7])||k(t,"src",s),k(t,"alt","Not found"),k(l,"class","border-2 border-gray-400 rounded-md p-1 m-1 bg-gray-800"),k(e,"href",n=`/player?tcode=${a[2]}&filename=${a[0]}`)},m(h,p){d(h,e,p),E(e,l),E(l,t),E(l,c),u.m(l,null),i||(r=J(t,"error",Ie),i=!0)},p(h,[p]){p&128&&!Y(t.src,s=h[7])&&k(t,"src",s),f===(f=o(h))&&u?u.p(h,p):(u.d(1),u=f(h),u&&(u.c(),u.m(l,null))),p&5&&n!==(n=`/player?tcode=${h[2]}&filename=${h[0]}`)&&k(e,"href",n)},i:j,o:j,d(h){h&&m(e),u.d(),i=!1,r()}}}let Ce="https://taleem-media.blr1.cdn.digitaloceanspaces.com/images/qthumb/default.png";function Ie(a){a.target.src=Ce}function ye(a,e,l){let{filename:t}=e,{name:s=""}=e,{tcode:c}=e,{chapter:n}=e,{exercise:i}=e,{questionNo:r}=e,{part:o}=e;function f(){let h=s&&s!==""?s:"";return h=h.replace(/_/g," ").substring(0,35),h=h.replace(/\b\w/g,p=>p.toUpperCase()),h}let u=`https://taleem-media.blr1.cdn.digitaloceanspaces.com/images/qthumb/${t}.png`;return a.$$set=h=>{"filename"in h&&l(0,t=h.filename),"name"in h&&l(1,s=h.name),"tcode"in h&&l(2,c=h.tcode),"chapter"in h&&l(3,n=h.chapter),"exercise"in h&&l(4,i=h.exercise),"questionNo"in h&&l(5,r=h.questionNo),"part"in h&&l(6,o=h.part)},a.$$.update=()=>{a.$$.dirty&25&&l(7,u=`https://taleem-media.blr1.cdn.digitaloceanspaces.com/images/qthumb/${t}.png`)},[t,s,c,n,i,r,o,u,f]}class Ne extends O{constructor(e){super(),Q(this,e,ye,we,U,{filename:0,name:1,tcode:2,chapter:3,exercise:4,questionNo:5,part:6})}}function ee(a,e,l){const t=a.slice();return t[6]=e[l],t[8]=l,t}function Be(a){let e,l,t=L(a[1]),s=[];for(let n=0;n<t.length;n+=1)s[n]=te(ee(a,t,n));const c=n=>D(s[n],1,1,()=>{s[n]=null});return{c(){e=b("div");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=v(n,"DIV",{class:!0});var i=C(e);for(let r=0;r<s.length;r+=1)s[r].l(i);i.forEach(m),this.h()},h(){k(e,"class","flex bg-gray-700 p-2 m-2 rounded-md w-full justify-center flex-wrap ")},m(n,i){d(n,e,i);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);l=!0},p(n,i){if(i&3){t=L(n[1]);let r;for(r=0;r<t.length;r+=1){const o=ee(n,t,r);s[r]?(s[r].p(o,i),w(s[r],1)):(s[r]=te(o),s[r].c(),w(s[r],1),s[r].m(e,null))}for(z(),r=t.length;r<s.length;r+=1)c(r);F()}},i(n){if(!l){for(let i=0;i<t.length;i+=1)w(s[i]);l=!0}},o(n){s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)D(s[i]);l=!1},d(n){n&&m(e),K(s,n)}}}function De(a){let e,l='<h1 class="bg-stone-600 p-2 m-2 rounded-lg">No Question found!</h1>';return{c(){e=b("div"),e.innerHTML=l,this.h()},l(t){e=v(t,"DIV",{class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-1fvm4v5"&&(e.innerHTML=l),this.h()},h(){k(e,"class","flex justify-center w-full")},m(t,s){d(t,e,s)},p:j,i:j,o:j,d(t){t&&m(e)}}}function te(a){let e,l,t,s,c;return t=new Ne({props:{name:a[6].name,filename:a[6].filename,tcode:a[0],exercise:a[6].exercise,chapter:a[6].chapter,questionNo:a[6].questionNo,part:a[6].part}}),{c(){e=b("div"),l=b("div"),S(t.$$.fragment),s=I(),this.h()},l(n){e=v(n,"DIV",{class:!0});var i=C(e);l=v(i,"DIV",{class:!0});var r=C(l);T(t.$$.fragment,r),r.forEach(m),s=y(i),i.forEach(m),this.h()},h(){k(l,"class","flex justify-center flex-wrap gap-4 "),k(e,"class","w-3/12")},m(n,i){d(n,e,i),E(e,l),R(t,l,null),E(e,s),c=!0},p(n,i){const r={};i&2&&(r.name=n[6].name),i&2&&(r.filename=n[6].filename),i&1&&(r.tcode=n[0]),i&2&&(r.exercise=n[6].exercise),i&2&&(r.chapter=n[6].chapter),i&2&&(r.questionNo=n[6].questionNo),i&2&&(r.part=n[6].part),t.$set(r)},i(n){c||(w(t.$$.fragment,n),c=!0)},o(n){D(t.$$.fragment,n),c=!1},d(n){n&&m(e),A(t)}}}function Ve(a){let e,l,t,s;const c=[De,Be],n=[];function i(r,o){return r[1].length<=0?0:1}return e=i(a),l=n[e]=c[e](a),{c(){l.c(),t=G()},l(r){l.l(r),t=G()},m(r,o){n[e].m(r,o),d(r,t,o),s=!0},p(r,[o]){let f=e;e=i(r),e===f?n[e].p(r,o):(z(),D(n[f],1,1,()=>{n[f]=null}),F(),l=n[e],l?l.p(r,o):(l=n[e]=c[e](r),l.c()),w(l,1),l.m(t.parentNode,t))},i(r){s||(w(l),s=!0)},o(r){D(l),s=!1},d(r){r&&m(t),n[e].d(r)}}}function je(a,e,l){let{tcode:t}=e,{questions:s}=e,{selectedChapter:c}=e,{selectedEx:n}=e,i=[];function r(){i.sort((o,f)=>o.sortOrder-f.sortOrder)}return a.$$set=o=>{"tcode"in o&&l(0,t=o.tcode),"questions"in o&&l(2,s=o.questions),"selectedChapter"in o&&l(3,c=o.selectedChapter),"selectedEx"in o&&l(4,n=o.selectedEx)},a.$$.update=()=>{if(a.$$.dirty&30){debugger;l(1,i=[]);for(let o=0;o<s.length;o++){const f=s[o];f.chapter===c&&f.exercise===n&&f.status==="final"&&i.push(f)}r(),l(1,i),l(4,n),l(3,c),l(2,s)}},[t,i,s,c,n]}class Pe extends O{constructor(e){super(),Q(this,e,je,Ve,U,{tcode:0,questions:2,selectedChapter:3,selectedEx:4})}}function le(a,e,l){const t=a.slice();return t[7]=e[l],t}function re(a,e,l){const t=a.slice();return t[10]=e[l],t}function se(a){let e,l,t,s,c,n=L(a[7].exercises),i=[];for(let r=0;r<n.length;r+=1)i[r]=ne(re(a,n,r));return{c(){e=b("div");for(let r=0;r<i.length;r+=1)i[r].c();l=I(),this.h()},l(r){e=v(r,"DIV",{class:!0});var o=C(e);for(let f=0;f<i.length;f+=1)i[f].l(o);l=y(o),o.forEach(m),this.h()},h(){k(e,"class","bg-stone-600 mx-6 mt-1 mb-1 rounded-md flex flex-col")},m(r,o){d(r,e,o);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(e,null);E(e,l),c=!0},p(r,o){if(o&25){n=L(r[7].exercises);let f;for(f=0;f<n.length;f+=1){const u=re(r,n,f);i[f]?i[f].p(u,o):(i[f]=ne(u),i[f].c(),i[f].m(e,l))}for(;f<i.length;f+=1)i[f].d(1);i.length=n.length}},i(r){c||(r&&fe(()=>{c&&(s&&s.end(1),t=ue(e,$,{duration:400}),t.start())}),c=!0)},o(r){t&&t.invalidate(),r&&(s=he(e,$,{duration:1e3})),c=!1},d(r){r&&m(e),K(i,r),r&&s&&s.end()}}}function ne(a){let e,l,t=a[10]+"",s,c,n,i;function r(){return a[6](a[10])}return{c(){e=b("button"),l=N("Ex: "),s=N(t),this.h()},l(o){e=v(o,"BUTTON",{class:!0});var f=C(e);l=B(f,"Ex: "),s=B(f,t),f.forEach(m),this.h()},h(){k(e,"class",c=`p-1 m-1 rounded-lg  px-2 mx-6 ${a[3]==a[10]?"bg-gray-800 text-red-600":"bg-gray-400"}`)},m(o,f){d(o,e,f),E(e,l),E(e,s),n||(i=J(e,"click",r),n=!0)},p(o,f){a=o,f&1&&t!==(t=a[10]+"")&&P(s,t),f&9&&c!==(c=`p-1 m-1 rounded-lg  px-2 mx-6 ${a[3]==a[10]?"bg-gray-800 text-red-600":"bg-gray-400"}`)&&k(e,"class",c)},d(o){o&&m(e),n=!1,i()}}}function ie(a){let e,l,t=a[7].chapter+"",s,c,n,i,r,o;function f(){return a[5](a[7])}let u=a[7].chapter==a[2]&&se(a);return{c(){e=b("button"),l=N("Chapter: "),s=N(t),n=I(),u&&u.c(),i=G(),this.h()},l(h){e=v(h,"BUTTON",{class:!0});var p=C(e);l=B(p,"Chapter: "),s=B(p,t),p.forEach(m),n=y(h),u&&u.l(h),i=G(),this.h()},h(){k(e,"class",c=`p-1 m-1 rounded-lg  px-2 ${a[2]==a[7].chapter?"bg-stone-600 text-red-600":"bg-gray-700"}`)},m(h,p){d(h,e,p),E(e,l),E(e,s),d(h,n,p),u&&u.m(h,p),d(h,i,p),r||(o=J(e,"click",f),r=!0)},p(h,p){a=h,p&1&&t!==(t=a[7].chapter+"")&&P(s,t),p&5&&c!==(c=`p-1 m-1 rounded-lg  px-2 ${a[2]==a[7].chapter?"bg-stone-600 text-red-600":"bg-gray-700"}`)&&k(e,"class",c),a[7].chapter==a[2]?u?(u.p(a,p),p&5&&w(u,1)):(u=se(a),u.c(),w(u,1),u.m(i.parentNode,i)):u&&(z(),D(u,1,1,()=>{u=null}),F())},d(h){h&&(m(e),m(n),m(i)),u&&u.d(h),r=!1,o()}}}function Se(a){let e,l,t=L(a[0]),s=[];for(let c=0;c<t.length;c+=1)s[c]=ie(le(a,t,c));return{c(){e=b("div"),l=b("div");for(let c=0;c<s.length;c+=1)s[c].c();this.h()},l(c){e=v(c,"DIV",{class:!0});var n=C(e);l=v(n,"DIV",{class:!0});var i=C(l);for(let r=0;r<s.length;r+=1)s[r].l(i);i.forEach(m),n.forEach(m),this.h()},h(){k(l,"class","flex flex-col justify-center w-full flex-wrap "),k(e,"class","p-2 m-1 border-2 border-white rounded-lg max-h-[500px] overflow-y-auto")},m(c,n){d(c,e,n),E(e,l);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(l,null)},p(c,[n]){if(n&31){t=L(c[0]);let i;for(i=0;i<t.length;i+=1){const r=le(c,t,i);s[i]?s[i].p(r,n):(s[i]=ie(r),s[i].c(),s[i].m(l,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=t.length}},i:j,o:j,d(c){c&&m(e),K(s,c)}}}function Te(a,e,l){let{chapter_map_array:t}=e,{setChapter:s}=e,{selectedChapter:c}=e,{selectedEx:n}=e,{setEx:i}=e;const r=f=>s(f.chapter),o=f=>i(f);return a.$$set=f=>{"chapter_map_array"in f&&l(0,t=f.chapter_map_array),"setChapter"in f&&l(1,s=f.setChapter),"selectedChapter"in f&&l(2,c=f.selectedChapter),"selectedEx"in f&&l(3,n=f.selectedEx),"setEx"in f&&l(4,i=f.setEx)},[t,s,c,n,i,r,o]}class Re extends O{constructor(e){super(),Q(this,e,Te,Se,U,{chapter_map_array:0,setChapter:1,selectedChapter:2,selectedEx:3,setEx:4})}}async function Ae(a){const e=[],l=[];for(const t of a)l.includes(t.chapter)||l.push(t.chapter);l.sort((t,s)=>t-s);for(let t=0;t<l.length;t++){const s=l[t];e.push({chapter:s,exercises:[]})}for(let t=0;t<e.length;t++){const s=e[t].chapter;for(let c=0;c<a.length;c++){const n=a[c];n.chapter==s&&(e[t].exercises.includes(n.exercise)||e[t].exercises.push(n.exercise))}}return e}function Le(a){let e,l,t,s,c,n,i;return t=new Re({props:{chapter_map_array:a[4],setChapter:a[5],selectedChapter:a[3],selectedEx:a[2],setEx:a[6]}}),n=new Pe({props:{questions:a[0],tcode:a[1],selectedEx:a[2],selectedChapter:a[3]}}),{c(){e=b("div"),l=b("div"),S(t.$$.fragment),s=I(),c=b("div"),S(n.$$.fragment),this.h()},l(r){e=v(r,"DIV",{class:!0});var o=C(e);l=v(o,"DIV",{class:!0});var f=C(l);T(t.$$.fragment,f),f.forEach(m),s=y(o),c=v(o,"DIV",{class:!0});var u=C(c);T(n.$$.fragment,u),u.forEach(m),o.forEach(m),this.h()},h(){k(l,"class","w-2/12"),k(c,"class","w-10/12"),k(e,"class","flex")},m(r,o){d(r,e,o),E(e,l),R(t,l,null),E(e,s),E(e,c),R(n,c,null),i=!0},p(r,[o]){const f={};o&16&&(f.chapter_map_array=r[4]),o&8&&(f.selectedChapter=r[3]),o&4&&(f.selectedEx=r[2]),t.$set(f);const u={};o&1&&(u.questions=r[0]),o&2&&(u.tcode=r[1]),o&4&&(u.selectedEx=r[2]),o&8&&(u.selectedChapter=r[3]),n.$set(u)},i(r){i||(w(t.$$.fragment,r),w(n.$$.fragment,r),i=!0)},o(r){D(t.$$.fragment,r),D(n.$$.fragment,r),i=!1},d(r){r&&m(e),A(t),A(n)}}}function Ue(a,e,l){let{questions:t}=e,{tcode:s}=e,c="1.1",n=1,i=[];function r(f){l(3,n=f);for(let u=0;u<i.length;u++){const h=i[u];if(h.chapter==n&&h.exercises.length>0){l(2,c=h.exercises[0]),o(c);return}}}function o(f){l(2,c=f)}return ce(async()=>{l(4,i=await Ae(t)),r(i[0].chapter)}),a.$$set=f=>{"questions"in f&&l(0,t=f.questions),"tcode"in f&&l(1,s=f.tcode)},[t,s,c,n,i,r,o]}class Oe extends O{constructor(e){super(),Q(this,e,Ue,Le,U,{questions:0,tcode:1})}}function Qe(a){let e;return{c(){e=N(a[0])},l(l){e=B(l,a[0])},m(l,t){d(l,e,t)},p(l,t){t&1&&P(e,l[0])},d(l){l&&m(e)}}}function ae(a){let e,l;return e=new Oe({props:{questions:a[1],tcode:a[0]}}),{c(){S(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,s){R(e,t,s),l=!0},p(t,s){const c={};s&2&&(c.questions=t[1]),s&1&&(c.tcode=t[0]),e.$set(c)},i(t){l||(w(e.$$.fragment,t),l=!0)},o(t){D(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function xe(a){let e,l,t,s,c,n,i,r,o,f,u,h,p,V,x,H,M,W;l=new pe({props:{bgColor:"bg-stone-600",icon:de.TEST,$$slots:{default:[Qe]},$$scope:{ctx:a}}});let q=a[1]&&ae(a);return{c(){e=b("div"),S(l.$$.fragment),t=I(),q&&q.c(),s=I(),c=b("br"),n=I(),i=b("br"),r=I(),o=b("br"),f=I(),u=b("br"),h=I(),p=b("br"),V=I(),x=b("br"),H=I(),M=b("br"),this.h()},l(_){e=v(_,"DIV",{class:!0});var g=C(e);T(l.$$.fragment,g),g.forEach(m),t=y(_),q&&q.l(_),s=y(_),c=v(_,"BR",{}),n=y(_),i=v(_,"BR",{}),r=y(_),o=v(_,"BR",{}),f=y(_),u=v(_,"BR",{}),h=y(_),p=v(_,"BR",{}),V=y(_),x=v(_,"BR",{}),H=y(_),M=v(_,"BR",{}),this.h()},h(){k(e,"class","flex justify-center p-2 ")},m(_,g){d(_,e,g),R(l,e,null),d(_,t,g),q&&q.m(_,g),d(_,s,g),d(_,c,g),d(_,n,g),d(_,i,g),d(_,r,g),d(_,o,g),d(_,f,g),d(_,u,g),d(_,h,g),d(_,p,g),d(_,V,g),d(_,x,g),d(_,H,g),d(_,M,g),W=!0},p(_,g){const X={};g&17&&(X.$$scope={dirty:g,ctx:_}),l.$set(X),_[1]?q?(q.p(_,g),g&2&&w(q,1)):(q=ae(_),q.c(),w(q,1),q.m(s.parentNode,s)):q&&(z(),D(q,1,1,()=>{q=null}),F())},i(_){W||(w(l.$$.fragment,_),w(q),W=!0)},o(_){D(l.$$.fragment,_),D(q),W=!1},d(_){_&&(m(e),m(t),m(s),m(c),m(n),m(i),m(r),m(o),m(f),m(u),m(h),m(p),m(V),m(x),m(H),m(M)),A(l),q&&q.d(_)}}}function He(a){let e,l,t,s;return e=new be({props:{isAdmin:a[3],isLogin:a[2]}}),t=new ge({props:{$$slots:{default:[xe]},$$scope:{ctx:a}}}),{c(){S(e.$$.fragment),l=I(),S(t.$$.fragment)},l(c){T(e.$$.fragment,c),l=y(c),T(t.$$.fragment,c)},m(c,n){R(e,c,n),d(c,l,n),R(t,c,n),s=!0},p(c,[n]){const i={};n&8&&(i.isAdmin=c[3]),n&4&&(i.isLogin=c[2]),e.$set(i);const r={};n&19&&(r.$$scope={dirty:n,ctx:c}),t.$set(r)},i(c){s||(w(e.$$.fragment,c),w(t.$$.fragment,c),s=!0)},o(c){D(e.$$.fragment,c),D(t.$$.fragment,c),s=!1},d(c){c&&m(l),A(e,c),A(t,c)}}}function Me(a,e,l){let t,s,c=!1,n=!1;return ce(async()=>{try{l(0,t=new URLSearchParams(location.search).get("tcode"));const i=await me(`${_e}/tcode/syllabus`,{tcode:t});if(i){const r=await i.json();l(1,s=r.items),l(2,c=ve()),l(3,n=ke())}else{const r=await i.json();chapter_map_array=await chapter_map(s),Z.push(r.message)}}catch{Z.push("System error")}}),[t,s,c,n]}class lt extends O{constructor(e){super(),Q(this,e,Me,He,U,{})}}export{lt as component};
